"use client";

import React, { useEffect } from "react";
import Container from "../components/slices/Container/Container";
import Text from "../components/slices/Text/Text";
import Button from "../components/slices/Button/Button";
import { useTranslation } from "../hooks/useTranslation";
import { useCategoriesStore } from "../stores";
import styles from "./not-found.module.scss";
import Header from "@/components/Header/Header";

export default function NotFound() {
  const { t } = useTranslation();
  const { categories, fetchCategories } = useCategoriesStore();

  // Load categories to get dynamic links
  useEffect(() => {
    if (categories.length === 0) {
      fetchCategories();
    }
  }, [categories.length, fetchCategories]);

  // Get first available category for dynamic links
  const firstCategory = categories.find((cat) => cat.isActive);

  return (
    <>
      <Header />
      <main className={styles.notFound}>
        <Container size="lg">
          <div className={styles.content}>
            <div className={styles.errorCode}>
              <div className={styles.errorCodeText}>
                <svg xmlns="http://www.w3.org/2000/svg" width="262" height="269" viewBox="0 0 262 269" fill="none">
                  <g clip-path="url(#clip0_2265_17)">
                    <path d="M5 25.0001C5 11.193 16.1927 0 29.9999 0C95.4166 0 160.995 0 227.999 0C241.806 0 253 11.1928 253 25C253 95.7094 253 166.585 253 239.037C253 252.844 241.807 264.037 228 264.037C162.583 264.037 97.0055 264.037 30.0009 264.037C16.1938 264.037 5 252.844 5 239.037C5 168.328 5 97.4519 5 25.0001Z" fill="var(--bg)" />
                    <path d="M19.0206 -0.252511C20.2131 -0.261195 20.2131 -0.261195 21.4296 -0.270054C22.7309 -0.264427 22.7309 -0.264427 24.0584 -0.258686C24.9846 -0.262483 25.9107 -0.26628 26.865 -0.270193C29.9756 -0.280455 33.0861 -0.276482 36.1968 -0.272544C38.4241 -0.276858 40.6513 -0.282003 42.8786 -0.287918C48.9344 -0.301232 54.9901 -0.301781 61.0459 -0.29927C66.0982 -0.29821 71.1505 -0.303052 76.2028 -0.307812C88.8028 -0.319464 101.403 -0.318597 114.003 -0.312222C124.943 -0.307092 135.883 -0.318261 146.823 -0.337135C158.058 -0.356369 169.293 -0.364277 180.528 -0.360836C186.835 -0.359034 193.141 -0.361674 199.448 -0.375442C205.379 -0.387905 211.31 -0.386019 217.241 -0.373049C219.419 -0.370696 221.597 -0.373431 223.774 -0.381608C226.746 -0.391961 229.716 -0.383987 232.688 -0.371373C233.551 -0.378693 234.414 -0.386013 235.303 -0.393555C240.271 -0.34914 243.767 0.128323 248 2.97795C253 8.93367 253 8.93367 253 46.6532C171.16 46.6532 89.32 46.6532 5 46.6532C5 8.93367 5 8.93367 11 1.98533C15.5 -0.248088 15.5 -0.248088 19.0206 -0.252511Z" fill="#636363" />
                    <path d="M132 79.4095C135.653 82.6332 138.495 86.1933 141.312 90.1422C141.93 91.0075 141.93 91.0075 142.56 91.8902C147.554 98.9517 152.334 106.16 157.115 113.365C160.946 119.121 164.909 124.745 169.022 130.305C172.306 134.798 175.43 139.395 178.562 143.992C179.813 145.824 181.064 147.655 182.316 149.486C182.92 150.376 183.523 151.265 184.145 152.181C185.402 153.989 186.696 155.77 188.023 157.527C188.984 158.81 188.984 158.81 189.965 160.118C190.547 160.872 191.13 161.626 191.73 162.404C193.333 165.396 193.359 167.385 193 170.731C191.2 173.411 189.916 175.239 187 176.686C185.466 176.786 183.927 176.825 182.389 176.832C180.932 176.843 180.932 176.843 179.445 176.854C178.376 176.857 177.306 176.859 176.204 176.862C175.08 176.868 173.957 176.875 172.799 176.882C169.068 176.901 165.337 176.913 161.605 176.923C160.334 176.927 159.062 176.931 157.752 176.935C151.717 176.954 145.682 176.968 139.647 176.976C132.681 176.986 125.716 177.012 118.75 177.052C112.717 177.086 106.683 177.098 100.65 177.102C98.0831 177.106 95.5167 177.118 92.9502 177.136C89.3613 177.16 85.7733 177.16 82.1843 177.153C81.1208 177.165 80.0572 177.178 78.9614 177.191C71.7539 177.141 71.7539 177.141 67.8635 174.796C65.7051 172.387 65.0774 171.277 64.625 168.086C65.1436 163.507 67.2297 161.051 70 157.454C71.1024 155.968 72.2011 154.479 73.2969 152.987C74.1892 151.776 74.1892 151.776 75.0996 150.541C79.3076 144.694 83.236 138.655 87.2148 132.653C91.0142 126.949 94.9453 121.378 99.0225 115.866C102.287 111.396 105.387 106.816 108.5 102.24C124.703 78.5573 124.703 78.5573 132 79.4095Z" fill="var(--accent)" />
                    <path d="M134 189.591C140.368 192.811 144.174 197.55 146.461 204.185C148.428 212.506 147.336 221.814 142.863 229.183C140.296 232.503 137.942 233.983 134 235.251C128.821 235.895 124.374 235.846 119.562 233.762C113.334 227.73 111.851 220.621 111.687 212.235C111.672 205.159 112.522 199.278 117.496 193.941C122.55 189.512 127.506 188.796 134 189.591Z" fill="var(--surface)" />
                    <path d="M95.1328 190.18C98 190.583 98 190.583 100 192.568C100.227 195.163 100.227 195.163 100.195 198.408C100.189 199.566 100.182 200.724 100.176 201.917C100.159 203.131 100.142 204.345 100.125 205.596C100.116 206.818 100.107 208.04 100.098 209.299C100.074 212.325 100.041 215.351 100 218.376C101.98 218.376 103.96 218.376 106 218.376C106.625 220.237 106.625 220.237 107 222.347C105 224.332 105 224.332 102.375 224.456C101.591 224.415 100.808 224.374 100 224.332C100.023 224.954 100.046 225.576 100.07 226.216C100.097 227.433 100.097 227.433 100.125 228.675C100.148 229.481 100.171 230.287 100.195 231.118C100 233.266 100 233.266 98 235.251C96.68 234.923 95.36 234.596 94 234.258C94 230.655 94 227.052 94 223.339C92.4351 223.362 90.8702 223.385 89.2578 223.409C87.2135 223.428 85.1693 223.446 83.125 223.463C82.0925 223.48 81.0599 223.497 79.9961 223.514C78.5169 223.523 78.5169 223.523 77.0078 223.533C75.641 223.549 75.641 223.549 74.2466 223.565C72 223.339 72 223.339 70 221.354C70.3631 218.296 71.5542 216.325 73.4062 213.906C73.8985 213.257 74.3908 212.608 74.8979 211.94C75.4266 211.259 75.9553 210.578 76.5 209.877C77.0403 209.177 77.5806 208.477 78.1372 207.756C79.2344 206.339 80.3349 204.925 81.4385 203.514C82.8445 201.702 84.2193 199.872 85.5859 198.031C86.719 196.556 86.719 196.556 87.875 195.05C88.8611 193.745 88.8611 193.745 89.8672 192.413C92 190.583 92 190.583 95.1328 190.18Z" fill="#5A5959" />
                    <path d="M176.062 190.397C179 190.583 179 190.583 180 191.576C180.088 193.561 180.107 195.549 180.098 197.535C180.094 198.741 180.091 199.947 180.088 201.19C180.079 202.46 180.071 203.73 180.062 205.038C180.058 206.312 180.053 207.586 180.049 208.898C180.037 212.058 180.02 215.217 180 218.376C181.98 218.376 183.96 218.376 186 218.376C186.495 220.833 186.495 220.833 187 223.34C184.69 223.34 182.38 223.34 180 223.34C180 226.943 180 230.546 180 234.258C177.525 234.75 177.525 234.75 175 235.251C174 234.258 174 234.258 173.902 231.773C173.914 230.771 173.925 229.769 173.937 228.737C173.946 227.732 173.955 226.728 173.965 225.693C173.976 224.916 173.988 224.14 174 223.34C173.339 223.345 172.678 223.35 171.996 223.355C169.018 223.376 166.04 223.389 163.062 223.402C161.501 223.414 161.501 223.414 159.908 223.427C158.919 223.43 157.929 223.433 156.91 223.436C155.535 223.444 155.535 223.444 154.133 223.452C152 223.34 152 223.34 151 222.347C150.424 219.654 150.626 217.973 152.11 215.633C153.706 213.601 155.365 211.641 157.062 209.691C158.258 208.278 159.454 206.864 160.648 205.449C161.227 204.771 161.805 204.093 162.401 203.395C164.94 200.388 167.334 197.277 169.73 194.158C172.564 190.61 172.564 190.61 176.062 190.397Z" fill="#565656" />
                    <path d="M134 189.591C140.368 192.811 144.174 197.55 146.461 204.185C148.428 212.506 147.336 221.814 142.863 229.183C140.296 232.503 137.942 233.983 134 235.251C128.821 235.895 124.374 235.846 119.562 233.762C113.334 227.73 111.851 220.621 111.687 212.235C111.672 205.159 112.522 199.278 117.496 193.941C122.55 189.512 127.506 188.796 134 189.591ZM120 200.509C118.202 204.904 117.703 208.684 117.687 213.413C117.671 214.58 117.654 215.747 117.637 216.95C118.156 221.827 119.904 225.07 123.125 228.737C126.722 230.677 128.937 230.621 132.914 229.958C136.236 228.902 137.359 227.33 139 224.332C141.54 218.028 142.344 210.653 140.242 204.104C138.53 200.47 136.804 197.224 133 195.546C126.685 194.75 123.97 195.177 120 200.509Z" fill="#595959" />
                    <path d="M129 103.108C132 103.232 132 103.232 133 104.225C133.1 105.783 133.131 107.345 133.133 108.905C133.136 110.377 133.136 110.377 133.139 111.879C133.134 112.936 133.13 113.993 133.125 115.082C133.123 116.15 133.121 117.219 133.119 118.32C133.07 127.543 132.655 136.717 132 145.915C130.344 146.295 128.675 146.624 127 146.908C122.278 142.22 124.888 123.548 124.875 117.315C124.87 116.054 124.866 114.792 124.861 113.493C124.863 112.312 124.865 111.13 124.867 109.913C124.868 108.843 124.869 107.772 124.871 106.669C125.061 103.071 125.311 103.261 129 103.108Z" fill="var(--bg)" />
                    <path d="M93 197.531C93.33 197.531 93.66 197.531 94 197.531C94 204.41 94 211.289 94 218.376C88.39 218.376 82.78 218.376 77 218.376C80.4695 212.938 84.1699 207.87 88.3125 202.929C88.7571 202.396 89.2016 201.863 89.6597 201.315C90.7481 200.032 91.8709 198.779 93 197.531Z" fill="var(--bg)" />
                    <path d="M80.0001 22.8303C82.3751 24.3812 82.3751 24.3812 84.0001 26.8007C84.5679 30.7463 84.6235 32.8209 82.3751 36.1686C79.2432 38.2138 77.6846 38.3913 74.0001 37.7196C71.0626 35.6723 71.0626 35.6723 69.0001 32.7565C68.9337 28.9328 69.1278 26.8022 71.6876 23.8849C74.7361 22.4946 76.6793 22.3496 80.0001 22.8303Z" fill="var(--success)" />
                    <path d="M33 22.8302C35.4375 24.3812 35.4375 24.3812 37 26.8007C37.5629 30.7118 37.604 32.8138 35.4375 36.1686C32.0328 38.335 29.9657 38.3522 26 37.7195C23.0386 35.1569 22.1324 33.5616 21.5 29.7165C22 26.8007 22 26.8007 23.5625 24.4432C26.9351 22.2114 29.0251 22.2666 33 22.8302Z" fill="var(--error)" />
                    <path d="M55.9999 22.8302C58.9374 24.8775 58.9374 24.8775 60.9999 27.7933C61.0663 31.617 60.8722 33.7475 58.3124 36.6649C55.2639 38.0552 53.3207 38.2002 49.9999 37.7195C47.6249 36.1686 47.6249 36.1686 45.9999 33.7491C45.4321 29.8035 45.3765 27.7289 47.6249 24.3812C50.7568 22.336 52.3154 22.1585 55.9999 22.8302Z" fill="var(--warning)" />
                    <path d="M173 197.531C173.33 197.531 173.66 197.531 174 197.531C174 204.41 174 211.289 174 218.376C168.72 218.376 163.44 218.376 158 218.376C160.968 212.612 164.785 207.893 168.977 202.944C171.088 200.487 171.088 200.487 173 197.531Z" fill="var(--bg)" />
                    <path d="M128.937 150.63C129.948 150.712 130.959 150.794 132 150.878C134 153.856 134 153.856 133.625 156.524C133.419 157.281 133.212 158.039 133 158.819C130.69 159.147 128.38 159.474 126 159.812C124 156.834 124 156.834 124.312 154.228C125.299 150.845 125.292 150.938 128.937 150.63Z" fill="var(--bg)" />
                  </g>
                  <defs>
                    <clipPath id="clip0_2265_17">
                      <rect width="262" height="269" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </div>
            </div>

            <div className={styles.message}>
              <Text variant="h2" className={styles.title}>
                {t("errors.notFound.title")}
              </Text>
              <Text variant="paragraph" className={styles.description}>
                {t("errors.notFound.description")}
              </Text>
            </div>

            <div className={styles.actions}>
              <Button href="/" variant="primary" size="lg">
                {t("errors.notFound.goHome")}
              </Button>
              {/* {firstCategory && (
              <Button
                href={`/${firstCategory.slug}`}
                variant="outline"
                size="lg"
              >
                {t("errors.notFound.viewListings")}
              </Button>
            )} */}
            </div>
            <hr />
            <div className={styles.suggestions}>
              <Text variant="paragraph" className={styles.suggestionsTitle}>
                {t("errors.notFound.suggestions.title")}
              </Text>
              <div className={styles.suggestionsList}>
                {firstCategory && (
                  <Button href={`/${firstCategory.slug}`} variant="link">
                    {t("errors.notFound.suggestions.browseListings")}
                  </Button>
                )}
                <Button href="/dashboard" variant="link">
                  {t("errors.notFound.suggestions.dashboard")}
                </Button>
                <Button href="/contact" variant="link">
                  {t("errors.notFound.suggestions.contact")}
                </Button>
              </div>
            </div>
          </div>
        </Container>
      </main>
    </>
  );
}
